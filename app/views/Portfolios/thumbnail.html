<div class="row">
<div class="col-md-12 col-lg-12">
#{list items:portfolios,as:'portfolio'}
    <div class="col-md-4 m-b-30 col-sm-12">
        <a href="@{Portfolios.selectProject(portfolio.project.id)}">
            <div class="panel panel-default">
                <div class="panel-heading p-0" style="position: relative">
                    <img src="${portfolio.imageUrl}c.jpg" class="img-responsive">
                    #{if admin || user.id==portfolio.owner.id}
                        <a href="@{Portfolios.blank(portfolio.id)}" style="position: absolute;top: 10px;right: 10px;"
                           class='btn edit btn-default btn-icon-sm btn-rounded' data-rel='tooltip' title='Засах'><i
                                class='fa fa-pencil'></i></a>
                    #{/if}
                </div>
                <div class="panel-body p-5 portfolioList">
                    <div class="col-md-12 col-sm-12">
                        <p class="c-dark w-600 oneLine align-center">${portfolio.project.name}</p>
                        <p class="f-12 align-left twoLine">${portfolio.description}</p>
                    </div>
                </div>
                #{if portfolio.isActive}
                    <div class="col-md-12 text-center bg-green p-5">
                        Идэвхтэй <i class="fa fa-angle-right"></i> ${portfolio.stage?.name}
                    </div>
                #{/if}
                #{else }
                    <div class="col-md-12 text-center bg-red p-5">
                        Идэвхгүй <i class="fa fa-angle-right"></i> ${portfolio.stage?.name}
                    </div>
                #{/else}
            </div>
        </a>
    </div>
    #{if portfolio_index%3==0} </div></div>
    <div class="row">
    <div class="col-md-12 col-lg-12">#{/if}
#{/list}
</div>
</div>
<script>
//    function imgEachHeightSet() {
//        var imgEachHeight = $("div#portfolioArea img.img-responsive:first").height();
//        if (imgEachHeight != null) {
//            $("div#portfolioArea img.img-responsive").each(function () {
//                $(this).css('height', imgEachHeight + 'px');
//            });
//        }
//    }
//    $(function () {
//        setTimeout(imgEachHeightSet(), 3000);
//    });
//    var rtime;
//    var timeout = false;
//    $(window).resize(function () {
//        $("div#portfolioArea img.img-responsive").each(function () {
//            $(this).css('height', 'auto');
//        });
//        rtime = new Date();
//        if (timeout === false) {
//            timeout = true;
//            setTimeout(resizeend, 500);
//        }
//    });
//    function resizeend() {
//        if (new Date() - rtime < 500) {
//            setTimeout(resizeend, 500);
//        } else {
//            timeout = false;
//            imgEachHeightSet();
//        }
//    }
</script>
